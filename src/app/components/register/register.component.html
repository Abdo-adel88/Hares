<div class="light-speed-in">
  <h3 *ngIf="isRegistering == true" class="text-start fw-bold mb-3 text-orange">
    Create an Account :
  </h3>
  <form
    *ngIf="isRegistering == true"
    [formGroup]="registerForm"
    (ngSubmit)="handleRegister(registerForm)"
  >
    <!-- Username Input -->
    <div class="mb-1">
      <label for="username" class="form-label">Username</label>
      <input
        type="text"
        id="username"
        class="form-control"
        formControlName="username"
        placeholder="Enter your username"
      />
      <div
        *ngIf="
          registerForm.get('username')?.invalid &&
          registerForm.get('username')?.touched
        "
        class="text-danger"
      >
        <small *ngIf="registerForm.get('username')?.errors?.['required']">
          Username is required.
        </small>
        <small *ngIf="registerForm.get('username')?.errors?.['minlength']">
          Username must be at least 3 characters.
        </small>
      </div>
    </div>

    <!-- Email Input -->
    <div class="mb-1">
      <label for="email" class="form-label">Email</label>
      <input
        type="email"
        id="email"
        class="form-control"
        formControlName="email"
        placeholder="Enter your email"
      />
      <div
        *ngIf="
          registerForm.get('email')?.invalid &&
          registerForm.get('email')?.touched
        "
        class="text-danger"
      >
        <small *ngIf="registerForm.get('email')?.errors?.['required']">
          Email is required.
        </small>
        <small *ngIf="registerForm.get('email')?.errors?.['email']">
          Enter a valid email address.
        </small>
      </div>
    </div>

    <!-- Password Input -->
    <div class="mb-1">
      <label for="password" class="form-label">Password</label>
      <input
        type="password"
        id="password"
        class="form-control"
        formControlName="password"
        placeholder="Enter your password"
      />
      <div
        *ngIf="
          registerForm.get('password')?.invalid &&
          registerForm.get('password')?.touched
        "
        class="text-danger"
      >
        <small *ngIf="registerForm.get('password')?.errors?.['required']">
          Password is required.
        </small>
        <small *ngIf="registerForm.get('password')?.errors?.['minlength']">
          Password must be at least 6 characters.
        </small>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="d-flex align-items-center">
      <button
        type="submit"
        class="btn bg-main text-light my-3"
        [disabled]="registerForm.invalid || isLoading"
      >
        <span *ngIf="!isLoading">Register</span>
        <span *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></span>
      </button>
      <p class="mt-3 ms-2 text-center">
        Already have an account?
        <a
          *ngIf="isRegistering == true"
          class="anchor pointer"
          (click)="toggleForm()"
          >Login</a
        >
      </p>
    </div>
  </form>

  <!-- Error Message -->
  <div *ngIf="apiErrorMessage" class="alert alert-danger mt-3 text-center">
    {{ apiErrorMessage }}
  </div>
  <app-login-form *ngIf="isRegistering == false"></app-login-form>
</div>
